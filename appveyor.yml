version: 1.0.{build}
before_build:
  - cd src
  - ps: $scripts =@()
  - ps: $path= Resolve-Path ./
  - ps: new-item "buildoutput"	-Force -ItemType Directory 
  - ps: Get-ChildItem (Join-Path ($path) \BuildScripts\*.ps1)  | ForEach { 		$scripts += $_.FullName	} 
  - ps: $scripts | ForEach { . $_} 
  - nuget restore


environment:
  COVERALLS_REPO_TOKEN:
    secure: Fh9IlfRd5IN9SeOTYw2yJB/cyTY/wgI2h4DodDz5tW/qlabO1lkjoxcj1AY9BZrG

build:
  project: src\TechFu.Nirvana.sln
  verbosity: minimal
  
# run open cover and push to coveralls
test_script: 
  - ps: run_analysis
